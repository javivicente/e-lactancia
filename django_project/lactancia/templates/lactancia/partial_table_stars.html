{% load i18n %}
{% load ratings_tags %}
                                <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>{% trans "Perfil" %}</th>
                                                <th>{% trans "Visitas" %}</th>
                                                <th>{% trans "Valoración Media" %}</th>
                                                <th>{% trans "Nº usuarios" %}</th>
                                            </tr>
                                        </thead> 
                                        <tbody>
                                        {% if grupop %}
                                            {% for p in perfil_form.perfil %}
                                                <tr>
                                                    <td>{{ p.choice_label }}</td>
                                                    
                                                        {% if p.choice_value == '1' %}
                                                            <td>{{visits.1}}</td>
                                                            {% get_rating_score for grupop using '1' as score %}
                                                        {% elif p.choice_value == '2' %}
                                                            <td>{{visits.2}}</td>
                                                            {% get_rating_score for grupop using '2' as score %}
                                                        {% elif p.choice_value == '14' %}
                                                            <td>{{visits.14}}</td>
                                                            {% get_rating_score for grupop using '14' as score %}
                                                        {% elif p.choice_value == '3' %}
                                                            <td>{{visits.3}}</td>
                                                            {% get_rating_score for grupop using '3' as score %}
                                                        {% elif p.choice_value == '4' %}
                                                            <td>{{visits.4}}</td>
                                                            {% get_rating_score for grupop using '4' as score %}
                                                        {% elif p.choice_value == '5' %}
                                                            <td>{{visits.5}}</td>
                                                            {% get_rating_score for grupop using '5' as score %}
                                                        {% elif p.choice_value == '13' %}
                                                            <td>{{visits.13}}</td>
                                                            {% get_rating_score for grupop using '13' as score %}
                                                        {% elif p.choice_value == '6' %}
                                                            <td>{{visits.6}}</td>
                                                            {% get_rating_score for grupop using '6' as score %}
                                                        {% elif p.choice_value == '7' %}
                                                            <td>{{visits.7}}</td>
                                                            {% get_rating_score for grupop using '7' as score %}
                                                        {% elif p.choice_value == '8' %}
                                                            <td>{{visits.8}}</td>
                                                            {% get_rating_score for grupop using '8' as score %}
                                                        {% elif p.choice_value == '9' %}
                                                            <td>{{visits.9}}</td>
                                                            {% get_rating_score for grupop using '9' as score %}
                                                        {% elif p.choice_value == '10' %}
                                                            <td>{{visits.10}}</td>
                                                            {% get_rating_score for grupop using '10' as score %}
                                                        {% elif p.choice_value == '11' %}
                                                            <td>{{visits.11}}</td>
                                                            {% get_rating_score for grupop using '11' as score %}
                                                        {% elif p.choice_value == '12' %}
                                                            <td>{{visits.12}}</td>
                                                            {% get_rating_score for grupop using '12' as score %}        
                                                        {% endif %}
                                                                            
                                                        {% if score %}
                                                            <td><div id="star{{ forloop.counter }}" class="rating" data-score="{{ score.average|stringformat:'f' }}"></div>{{ score.average|floatformat }} {% trans 'de 5' %}</td>
                                                            <td>{{ score.num_votes }}</td>
                                                        {% else %}
                                                            <td><div class="rating">
                                                                    
                                                                </div></td>
                                                            <td>0</td>
                                                        {% endif %}
                                                    
                                                </tr>
                                            {% endfor %} 
                                         {% elif marcap %}
                                            {% for p in perfil_form.perfil %}
                                                <tr>
                                                    <td>{{ p.choice_label }}</td>
                                                        {% if p.choice_value == '1' %}
                                                            <td>{{visits.1}}</td>
                                                            {% get_rating_score for marcap using '1' as score %}
                                                        {% elif p.choice_value == '2' %}
                                                            <td>{{visits.2}}</td>
                                                            {% get_rating_score for marcap using '2' as score %}
                                                        {% elif p.choice_value == '14' %}
                                                            <td>{{visits.14}}</td>
                                                            {% get_rating_score for marcap using '14' as score %}
                                                        {% elif p.choice_value == '3' %}
                                                            <td>{{visits.3}}</td>
                                                            {% get_rating_score for marcap using '3' as score %}
                                                        {% elif p.choice_value == '4' %}
                                                            <td>{{visits.4}}</td>
                                                            {% get_rating_score for marcap using '4' as score %}
                                                        {% elif p.choice_value == '5' %}
                                                            <td>{{visits.5}}</td>
                                                            {% get_rating_score for marcap using '5' as score %}
                                                        {% elif p.choice_value == '13' %}
                                                            <td>{{visits.13}}</td>
                                                            {% get_rating_score for marcap using '13' as score %}
                                                        {% elif p.choice_value == '6' %}
                                                            <td>{{visits.6}}</td>
                                                            {% get_rating_score for marcap using '6' as score %}
                                                        {% elif p.choice_value == '7' %}
                                                            <td>{{visits.7}}</td>
                                                            {% get_rating_score for marcap using '7' as score %}
                                                        {% elif p.choice_value == '8' %}
                                                            <td>{{visits.8}}</td>
                                                            {% get_rating_score for marcap using '8' as score %}
                                                        {% elif p.choice_value == '9' %}
                                                            <td>{{visits.9}}</td>
                                                            {% get_rating_score for marcap using '9' as score %}
                                                        {% elif p.choice_value == '10' %}
                                                            <td>{{visits.10}}</td>
                                                            {% get_rating_score for marcap using '10' as score %}
                                                        {% elif p.choice_value == '11' %}
                                                            <td>{{visits.11}}</td>
                                                            {% get_rating_score for marcap using '11' as score %}
                                                        {% elif p.choice_value == '12' %}
                                                            <td>{{visits.12}}</td>
                                                            {% get_rating_score for marcap using '12' as score %}        
                                                        {% endif %}
                                                                             
                                                        {% if score %}
                                                            <td><div id="star{{ forloop.counter }}" class="rating" data-score="{{ score.average|stringformat:'f' }}"></div>{{ score.average|floatformat }} {% trans "de 5"  %}</td>
                                                            <td>{{ score.num_votes }}</td>
                                                        {% else %}
                                                            <td><div class="rating">
                                                                    
                                                                </div></td>
                                                            <td>0</td>
                                                        {% endif %}
                                                        
                                                </tr>
                                            {% endfor %}       
                                        {% elif prod %}
                                            {% for p in perfil_form.perfil %}
                                                <tr>
                                                    <td>{{ p.choice_label }}</td>
                                                        {% if p.choice_value == '1' %}
                                                            <td>{{visits.1}}</td>
                                                            {% get_rating_score for prod using '1' as score %}
                                                        {% elif p.choice_value == '2' %}
                                                            <td>{{visits.2}}</td>
                                                            {% get_rating_score for prod using '2' as score %}
                                                        {% elif p.choice_value == '14' %}
                                                            <td>{{visits.14}}</td>
                                                            {% get_rating_score for prod using '14' as score %}
                                                        {% elif p.choice_value == '3' %}
                                                            <td>{{visits.3}}</td>
                                                            {% get_rating_score for prod using '3' as score %}
                                                        {% elif p.choice_value == '4' %}
                                                            <td>{{visits.4}}</td>
                                                            {% get_rating_score for prod using '4' as score %}
                                                        {% elif p.choice_value == '5' %}
                                                            <td>{{visits.5}}</td>
                                                            {% get_rating_score for prod using '5' as score %}
                                                        {% elif p.choice_value == '13' %}
                                                            <td>{{visits.13}}</td>
                                                            {% get_rating_score for prod using '13' as score %}
                                                        {% elif p.choice_value == '6' %}
                                                            <td>{{visits.6}}</td>
                                                            {% get_rating_score for prod using '6' as score %}
                                                        {% elif p.choice_value == '7' %}
                                                            <td>{{visits.7}}</td>
                                                            {% get_rating_score for prod using '7' as score %}
                                                        {% elif p.choice_value == '8' %}
                                                            <td>{{visits.8}}</td>
                                                            {% get_rating_score for prod using '8' as score %}
                                                        {% elif p.choice_value == '9' %}
                                                            <td>{{visits.9}}</td>
                                                            {% get_rating_score for prod using '9' as score %}
                                                        {% elif p.choice_value == '10' %}
                                                            <td>{{visits.10}}</td>
                                                            {% get_rating_score for prod using '10' as score %}
                                                        {% elif p.choice_value == '11' %}
                                                            <td>{{visits.11}}</td>
                                                            {% get_rating_score for prod using '11' as score %}
                                                        {% elif p.choice_value == '12' %}
                                                            <td>{{visits.12}}</td>
                                                            {% get_rating_score for prod using '12' as score %}        
                                                        {% endif %}
                                                                             
                                                        {% if score %}
                                                            <td><div id="star{{ forloop.counter }}" class="rating" data-score="{{ score.average|stringformat:'f' }}"></div>{{ score.average|floatformat }} {% trans "de 5"  %}</td>
                                                            <td>{{ score.num_votes }}</td>
                                                        {% else %}
                                                            <td><div class="rating">
                                                                    
                                                                </div></td>
                                                            <td>0</td>
                                                        {% endif %}
                                                       
                                                </tr>
                                            {% endfor %}    
                                        {% endif %}
                                        
                                        </tbody>
                                    </table>